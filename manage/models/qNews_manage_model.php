<?phpclass News_manage_model extends Model {    function __construct() {        parent::__construct();		    }        //////// INSERT NEWS ///////////////////////////////////////////////////////         public function insertnews($data)    {        $Title=$data['Title'];		        $Description=$data['Description'];        	$this->db->insert("news", array('Title' => $Title,	            'Description' =>$Description                    )); 		return $this->db->lastInsertId();           }	public function insertimages($img,$id)    {                return $this->db->insert("news_image", array('file' => $img, 'nid' => $id));          }    public function getnews()    {       return $this->db->select("select * from news join news_image ON news.id=news_image.nid  group by news.id desc");    }		public function getnews1()    {       return $this->db->select("select * from news order by id desc");    }		public function getnewsnotemptyfile($id)    {        return $this->db->select("select * from news_image where nid='$id' limit 1");	   	   //echo '<pre>';print_r($d);exit;    }	public function getallimages($id)    {       return $this->db->select("select * from news  join news_image ON news.id=news_image.nid where news.id='$id'");    }			public function getnewsByid($id)    {         return $this->db->select("select * from news where id='$id'");    }	public function updateimages($img,$id)    {		//echo $img;exit;		        $img1=$img?$img:'';		//$id=$data['hidden'];		$Valres['file'] = $img1;		return $this->db->insert('news_image', array('file' => $img, 'nid' => $id));        //return $this->db->insert('products_image', $Valres, "product_id='$id'");						           }				    public function getupdatenews($data)    {                           $id=$data['hidden'];          $Valres['Title'] = $data['Title'];          $Valres['Description'] = $data['Description'];		  		   date_default_timezone_set('Asia/Calcutta');          $datee = time();          $tmps =  date('H:i:s', $datee);		  $dt =   $data['tstamp'];		  $dt =trim($data['tstamp']).' '.trim($tmps);		  		  list($date, $time) = explode(' ', $dt);		  list($year, $month, $day) = explode('-', $date);		  list($hour, $minute, $second) = explode(':', $time);          $timestamp = mktime($hour, $minute, $second, $month, $day, $year);		            $Valres['tstamp'] =  date('Y-m-d H:i:s',$timestamp);       //print_r($Valres);exit;	   if($this->db->update('news',$Valres, "id='$id'")){		 //exit("treu");   	   }else{		   //exit("false");	   }                      return  $this->db->update('news', $Valres, "id='$id'");             }		    public function getnewsimg($id)    {        return $this->db->select("select * from news_image where nid=$id");    }		public function getnewsimgonly($id)    {        return $this->db->select("select file from news_image where id=$id");    }    public function getdeleteimgnews($id)    {        $sql= $this->db->select("delete from news where id='$id'");                return $sql;    }		public function getdeleteimgnews_image($id)    {				        $sql= $this->db->select("delete from news_image where nid='$id'");                return $sql;    }	    //{      //  $sql= $this->db->select("delete from products JOIN products_image ON products.pid=products_image.product_id");                //return $sql;    //}		 public function getdeleteimgonly($id)	    {		 $sql= $this->db->select("delete from news_image where id=$id");                     // $sql = $this->db->delete('products_image',$id);		//echo $sql;exit("$id");       // return $sql;    }		        public function update_status($ar){                $Valres['nw_status'] = $ar['nw_status'];        $id = $ar['id'];        return  $this->db->update('news', $Valres, 'id=' . $id);            }	/////////////////// DELETE CHECKED /////////////////////////////////////////        public function delete_checked($id) {        ///////// GET THE ID OF ALL ITEMS TO BE DELETED ////////////////////////        ///////// ONLY IF ATLEAST ONE ITEM TO BE DELETED ///////////////////////        $check = isset($id['checkbox']) ? $id['checkbox'] : '';        ///////// CHECK AT LEAST ONE CHECK BOX IS SELECTED /////////////////////        if (!empty($check)) {            //////////// LOOP THROUGH THE CHECKBOX ARRAY ///////////////////////            foreach ($check as $value) {                $this->db->select("delete from news where id=$value");            }        }    }}